# 创建对话（基础教程）
这里我会边讲边做一个小小的示例，更多内容可以查看其他部分
### 1.添加数据
1.将动态实体拖入场上，进入`组件`后，点击`自定义变量`的`详细编辑`

![模版图片](/assets/dialogue-function-introduction/example0.png)

2.根据箭头指引，选择`结构体`变量类型，在弹出的页面中选择`对话`结构体，再点击`添加变量`，添加好的变量可以起任意名，示例中我们给变量名填写`伊蕾娜的自白`

![模版图片](/assets/dialogue-function-introduction/example1.png)

3.点进来后，可以看见有两个字段，`对话列表`和`跳转对话`

我们这里先关注`对话列表`，点击对话列表第一个编辑按钮（在基础复杂文本结构体_xxx右边那个小按钮）

跳转对话请参阅[跳转对话](./跳转对话)

![模版图片](/assets/dialogue-function-introduction/对话结构体变量内容.png)

4.这里所有字段作用可以参考（我这里还没写，只额外说明一点，就是等待显示时间，就是触发对话后n秒才开始播放第一句话，因为原神本体的聊天角色和角色之间会偶尔有较长的停顿，因此有这个）

![模版图片](/assets/dialogue-function-introduction/基础复杂文本结构体内容.png)

5.我们先来做个最简单的示例，我们让`伊蕾娜`这个人名，说`“天哪，我简直是天底下最美的女人”`，`“我真的好喜欢我自己”`两句话

就可以在标题处写上名字`伊蕾娜`，在内容处，点击一个加号，得到共计2长度的内容列表，并将两句话分别填入进去

![模版图片](/assets/dialogue-function-introduction/伊蕾娜自白.png)

至此一个最简单的对话数据就添加完毕了

### 2.添加触发方式（站桩对话示例）
::: info
我们能用多种触发方式`选项卡触发`、`碰撞器触发`、`信号触发`、等等...

这里我们只介绍`选项卡触发`方式，因为它涉及添加本地过滤器的步骤，而其他触发方式不需要
:::

1.我们创建一个新的节点图，拖出`选项卡选中时`节点，再通过选择者实体`获取对应的玩家实体`，后面接上你想要创建的对话类型，这里我们以`站桩对话`作为例子

目前有的对话类型可以参考[已实现的功能](#已实现的功能)，触发的节点图可参考（我还没写）

![模版图片](/assets/dialogue-function-introduction/创建节点图.png)

2.回到游戏中，添加选项卡
::: warning
请务必注意将节点图挂载到`储存对话数据的实体`上，创建对话是`读取自身对话数据`

当然你也可以点开这个符合节点，发现只是默认传入了自身实体
:::

按照步骤，在组件中`1.点击添加通用组件`，`2.选择选项卡`，并`3.进入选项卡的详细编辑中，进行配置`

![模版图片](/assets/dialogue-function-introduction/添加选项卡.png)

3.我们点击每个选项卡，给它们配置过滤节点。

点击`过滤节点图`，在弹出的页面中选择`选项卡在进入对话后隐藏`（地图模版的这个节点在对话页签下）

这个节点的作用主要是当玩家进入`锁定对话`状态后，自动隐藏选项卡（不然会很出戏）

::: info
同理，你可以获取玩家身上的`（勿删）isOptionEnable`变量，若是进入锁定对话后，它会自动设置成`否`，反之设置成`是`，可以搭配自己的过滤节点使用。
:::

![模版图片](/assets/dialogue-function-introduction/选择过滤器.png)

4.设置好后，我们直接进入游戏查看

<video src="/assets/dialogue-function-introduction/伊蕾娜自白视频.mp4"
autoplay
muted
loop
playsinline
style="width: 100%; border-radius: 8px;">
</video>

### 3.为对话添加自定义播放时间（边走边说对话与黑幕文本示例）
1.返回编辑数据的地方，可以看到有一个字段叫`内容显示时间（若需）`

点击加号，添加`和内容列表相同长度的时间列表`，这里我们为每句话配置2秒的显示时间，所以两个值都填2.00

![内容显示时间](/assets/dialogue-function-introduction/内容显示时间.png)

2.重新进入游戏测试

在没改变对话类型的情况下，我们发现`下一句话的按钮`消失了，取而代之的是经过2s后自定下一句话

::: important
在设定中，只要时间列表有值，就会代替掉手动下一句话（按钮），并按照内容查询对应的时间下一句

若是时间列表长度小于内容长度，会导致对话卡住，无法下一句话！
:::

<video src="/assets/dialogue-function-introduction/内容显示时间视频.mp4"
autoplay
muted
loop
playsinline
style="width: 100%; border-radius: 8px;">
</video>

3.我们尝试替换对话类型，在对话中分别接入`边走边说对话`和`黑幕文本`

::: danger
这里我把两次的对话放一起展示了，不是指同时触发！不可以这样写！
:::
![示例](/assets/dialogue-function-introduction/节点图2.png)
边走边说示例：
<video src="/assets/dialogue-function-introduction/边走边说示例.mp4"
autoplay
muted
loop
playsinline
style="width: 100%; border-radius: 8px;">
</video>
黑幕文本示例
<video src="/assets/dialogue-function-introduction/黑幕示例.mp4"
autoplay
muted
loop
playsinline
style="width: 100%; border-radius: 8px;">
</video>

::: info
这里黑幕依然可以通过不填入时间来使用按钮下一句话
:::

::: info 建议
因为这个模版本身是仿制原神本体的类型，因此建议

**站桩对话**：不填入时间

**边走边说**：填入时间自动播放

**黑幕文本**：可按需求填入时间

**CG字幕文本**：填入时间自动播放

**CG插画文本**：可按需求填入时间

**中部文本**：不填入时间

:::
